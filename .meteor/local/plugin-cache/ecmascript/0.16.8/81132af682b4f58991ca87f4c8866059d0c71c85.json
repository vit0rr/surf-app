{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/nicholas/Desktop/projects/local-legends/client/styles/packages/mdg:meteor-apm-agent/lib/hijack/error.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"packages/mdg:meteor-apm-agent/lib/hijack/error.js","filename":"/Users/nicholas/Desktop/projects/local-legends/client/styles/packages/mdg:meteor-apm-agent/lib/hijack/error.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/nicholas/Desktop/projects/local-legends/client/styles","root":"/Users/nicholas/Desktop/projects/local-legends/client/styles","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/nicholas/Desktop/projects/local-legends/client/styles/packages/mdg:meteor-apm-agent/lib/hijack/error.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/mdg:meteor-apm-agent/lib/hijack/error.js"}},"code":"TrackUncaughtExceptions = function () {\n  process.on('uncaughtException', function (err) {\n    // skip errors with `_skipKadira` flag\n    if (err._skipKadira) {\n      return;\n    }\n\n    // let the server crash normally if error tracking is disabled\n    if (!Kadira.options.enableErrorTracking) {\n      printErrorAndKill(err);\n    }\n\n    // looking for already tracked errors and throw them immediately\n    // throw error immediately if kadira is not ready\n    if (err._tracked || !Kadira.connected) {\n      printErrorAndKill(err);\n    }\n    var trace = getTrace(err, 'server-crash', 'uncaughtException');\n    Kadira.models.error.trackError(err, trace);\n    Kadira._sendPayload(function () {\n      clearTimeout(timer);\n      throwError(err);\n    });\n    var timer = setTimeout(function () {\n      throwError(err);\n    }, 1000 * 10);\n    function throwError(err) {\n      // sometimes error came back from a fiber.\n      // But we don't fibers to track that error for us\n      // That's why we throw the error on the nextTick\n      process.nextTick(function () {\n        // we need to mark this error where we really need to throw\n        err._tracked = true;\n        printErrorAndKill(err);\n      });\n    }\n  });\n  function printErrorAndKill(err) {\n    // since we are capturing error, we are also on the error message.\n    // so developers think we are also reponsible for the error.\n    // But we are not. This will fix that.\n    console.error(err.stack);\n    process.exit(7);\n  }\n};\nTrackMeteorDebug = function () {\n  var originalMeteorDebug = Meteor._debug;\n  Meteor._debug = function (message, stack) {\n    if (!Kadira.options.enableErrorTracking) {\n      return originalMeteorDebug.call(this, message, stack);\n    }\n\n    // We've changed `stack` into an object at method and sub handlers so we can\n    // ignore them here. These errors are already tracked so don't track again.\n    if (stack && stack.stack) {\n      stack = stack.stack;\n      // Restore so origionalMeteorDebug shows the stack as a string instead as\n      // an object\n      arguments[1] = stack;\n    } else {\n      // only send to the server, if only connected to kadira\n      if (Kadira.connected) {\n        var error = new Error(message);\n        error.stack = stack;\n        var trace = getTrace(error, 'server-internal', 'Meteor._debug');\n        Kadira.models.error.trackError(error, trace);\n      }\n    }\n    return originalMeteorDebug.apply(this, arguments);\n  };\n};\nfunction getTrace(err, type, subType) {\n  return {\n    type: type,\n    subType: subType,\n    name: err.message,\n    errored: true,\n    at: Kadira.syncedDate.getTime(),\n    events: [['start', 0, {}], ['error', 0, {\n      error: {\n        message: err.message,\n        stack: err.stack\n      }\n    }]],\n    metrics: {\n      total: 0\n    }\n  };\n}","map":{"version":3,"names":["TrackUncaughtExceptions","process","on","err","_skipKadira","Kadira","options","enableErrorTracking","printErrorAndKill","_tracked","connected","trace","getTrace","models","error","trackError","_sendPayload","clearTimeout","timer","throwError","setTimeout","nextTick","console","stack","exit","TrackMeteorDebug","originalMeteorDebug","Meteor","_debug","message","call","arguments","Error","apply","type","subType","name","errored","at","syncedDate","getTime","events","metrics","total"],"sources":["packages/mdg:meteor-apm-agent/lib/hijack/error.js"],"sourcesContent":["TrackUncaughtExceptions = function () {\n  process.on('uncaughtException', function (err) {\n    // skip errors with `_skipKadira` flag\n    if(err._skipKadira) {\n      return;\n    }\n\n    // let the server crash normally if error tracking is disabled\n    if(!Kadira.options.enableErrorTracking) {\n      printErrorAndKill(err);\n    }\n\n    // looking for already tracked errors and throw them immediately\n    // throw error immediately if kadira is not ready\n    if(err._tracked || !Kadira.connected) {\n      printErrorAndKill(err);\n    }\n\n    var trace = getTrace(err, 'server-crash', 'uncaughtException');\n    Kadira.models.error.trackError(err, trace);\n    Kadira._sendPayload(function () {\n      clearTimeout(timer);\n      throwError(err);\n    });\n\n    var timer = setTimeout(function () {\n      throwError(err);\n    }, 1000*10);\n\n    function throwError(err) {\n      // sometimes error came back from a fiber.\n      // But we don't fibers to track that error for us\n      // That's why we throw the error on the nextTick\n      process.nextTick(function() {\n        // we need to mark this error where we really need to throw\n        err._tracked = true;\n        printErrorAndKill(err);\n      });\n    }\n  });\n\n  function printErrorAndKill(err) {\n    // since we are capturing error, we are also on the error message.\n    // so developers think we are also reponsible for the error.\n    // But we are not. This will fix that.\n    console.error(err.stack);\n    process.exit(7);\n  }\n}\n\nTrackMeteorDebug = function () {\n  var originalMeteorDebug = Meteor._debug;\n  Meteor._debug = function (message, stack) {\n    if(!Kadira.options.enableErrorTracking) {\n      return originalMeteorDebug.call(this, message, stack);\n    }\n\n    // We've changed `stack` into an object at method and sub handlers so we can\n    // ignore them here. These errors are already tracked so don't track again.\n    if(stack && stack.stack) {\n      stack = stack.stack;\n      // Restore so origionalMeteorDebug shows the stack as a string instead as\n      // an object\n      arguments[1] = stack;\n    } else {\n      // only send to the server, if only connected to kadira\n      if(Kadira.connected) {\n        var error = new Error(message);\n        error.stack = stack;\n        var trace = getTrace(error, 'server-internal', 'Meteor._debug');\n        Kadira.models.error.trackError(error, trace);\n      }\n    }\n\n    return originalMeteorDebug.apply(this, arguments);\n  }\n}\n\nfunction getTrace(err, type, subType) {\n  return {\n    type: type,\n    subType: subType,\n    name: err.message,\n    errored: true,\n    at: Kadira.syncedDate.getTime(),\n    events: [\n      ['start', 0, {}],\n      ['error', 0, {error: {message: err.message, stack: err.stack}}]\n    ],\n    metrics: {\n      total: 0\n    }\n  };\n}\n"],"mappings":"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"},"sourceType":"module","externalDependencies":{},"hash":"81132af682b4f58991ca87f4c8866059d0c71c85"}
