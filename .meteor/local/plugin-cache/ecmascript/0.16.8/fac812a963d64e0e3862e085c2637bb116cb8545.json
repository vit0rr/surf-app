{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/nicholas/Desktop/projects/local-legends/client/styles/packages/mdg:meteor-apm-agent/lib/check_for_oplog.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"packages/mdg:meteor-apm-agent/lib/check_for_oplog.js","filename":"/Users/nicholas/Desktop/projects/local-legends/client/styles/packages/mdg:meteor-apm-agent/lib/check_for_oplog.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/nicholas/Desktop/projects/local-legends/client/styles","root":"/Users/nicholas/Desktop/projects/local-legends/client/styles","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/nicholas/Desktop/projects/local-legends/client/styles/packages/mdg:meteor-apm-agent/lib/check_for_oplog.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/mdg:meteor-apm-agent/lib/check_for_oplog.js"}},"code":"// expose for testing purpose\nOplogCheck = {};\nOplogCheck._070 = function (cursorDescription) {\n  var options = cursorDescription.options;\n  if (options.limit) {\n    return {\n      code: \"070_LIMIT_NOT_SUPPORTED\",\n      reason: \"Meteor 0.7.0 does not support limit with oplog.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    };\n  }\n  ;\n  var exists$ = _.any(cursorDescription.selector, function (value, field) {\n    if (field.substr(0, 1) === '$') return true;\n  });\n  if (exists$) {\n    return {\n      code: \"070_$_NOT_SUPPORTED\",\n      reason: \"Meteor 0.7.0 supports only equal checks with oplog.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    };\n  }\n  ;\n  var onlyScalers = _.all(cursorDescription.selector, function (value, field) {\n    return typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\" || value === null || value instanceof Meteor.Collection.ObjectID;\n  });\n  if (!onlyScalers) {\n    return {\n      code: \"070_ONLY_SCALERS\",\n      reason: \"Meteor 0.7.0 only supports scalers as comparators.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    };\n  }\n  return true;\n};\nOplogCheck._071 = function (cursorDescription) {\n  var options = cursorDescription.options;\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n  if (options.limit) {\n    return {\n      code: \"071_LIMIT_NOT_SUPPORTED\",\n      reason: \"Meteor 0.7.1 does not support limit with oplog.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    };\n  }\n  ;\n  return true;\n};\nOplogCheck.env = function () {\n  if (!process.env.MONGO_OPLOG_URL) {\n    return {\n      code: \"NO_ENV\",\n      reason: \"You haven't added oplog support for your the Meteor app.\",\n      solution: \"Add oplog support for your Meteor app. see: http://goo.gl/Co1jJc\"\n    };\n  } else {\n    return true;\n  }\n};\nOplogCheck.disableOplog = function (cursorDescription) {\n  if (cursorDescription.options._disableOplog) {\n    return {\n      code: \"DISABLE_OPLOG\",\n      reason: \"You've disable oplog for this cursor explicitly with _disableOplog option.\"\n    };\n  } else {\n    return true;\n  }\n};\n\n// when creating Minimongo.Matcher object, if that's throws an exception\n// meteor won't do the oplog support\nOplogCheck.miniMongoMatcher = function (cursorDescription) {\n  if (Minimongo.Matcher) {\n    try {\n      var matcher = new Minimongo.Matcher(cursorDescription.selector);\n      return true;\n    } catch (ex) {\n      return {\n        code: \"MINIMONGO_MATCHER_ERROR\",\n        reason: \"There's something wrong in your mongo query: \" + ex.message,\n        solution: \"Check your selector and change it accordingly.\"\n      };\n    }\n  } else {\n    // If there is no Minimongo.Matcher, we don't need to check this\n    return true;\n  }\n};\nOplogCheck.miniMongoSorter = function (cursorDescription) {\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n  if (Minimongo.Sorter && cursorDescription.options.sort) {\n    try {\n      var sorter = new Minimongo.Sorter(cursorDescription.options.sort, {\n        matcher: matcher\n      });\n      return true;\n    } catch (ex) {\n      return {\n        code: \"MINIMONGO_SORTER_ERROR\",\n        reason: \"Some of your sort specifiers are not supported: \" + ex.message,\n        solution: \"Check your sort specifiers and chage them accordingly.\"\n      };\n    }\n  } else {\n    return true;\n  }\n};\nOplogCheck.fields = function (cursorDescription) {\n  var options = cursorDescription.options;\n  if (options.fields) {\n    try {\n      LocalCollection._checkSupportedProjection(options.fields);\n      return true;\n    } catch (e) {\n      if (e.name === \"MinimongoError\") {\n        return {\n          code: \"NOT_SUPPORTED_FIELDS\",\n          reason: \"Some of the field filters are not supported: \" + e.message,\n          solution: \"Try removing those field filters.\"\n        };\n      } else {\n        throw e;\n      }\n    }\n  }\n  return true;\n};\nOplogCheck.skip = function (cursorDescription) {\n  if (cursorDescription.options.skip) {\n    return {\n      code: \"SKIP_NOT_SUPPORTED\",\n      reason: \"Skip does not support with oplog.\",\n      solution: \"Try to avoid using skip. Use range queries instead: http://goo.gl/b522Av\"\n    };\n  }\n  return true;\n};\nOplogCheck.where = function (cursorDescription) {\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n  if (matcher.hasWhere()) {\n    return {\n      code: \"WHERE_NOT_SUPPORTED\",\n      reason: \"Meteor does not support queries with $where.\",\n      solution: \"Try to remove $where from your query. Use some alternative.\"\n    };\n  }\n  ;\n  return true;\n};\nOplogCheck.geo = function (cursorDescription) {\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n  if (matcher.hasGeoQuery()) {\n    return {\n      code: \"GEO_NOT_SUPPORTED\",\n      reason: \"Meteor does not support queries with geo partial operators.\",\n      solution: \"Try to remove geo partial operators from your query if possible.\"\n    };\n  }\n  ;\n  return true;\n};\nOplogCheck.limitButNoSort = function (cursorDescription) {\n  var options = cursorDescription.options;\n  if (options.limit && !options.sort) {\n    return {\n      code: \"LIMIT_NO_SORT\",\n      reason: \"Meteor oplog implementation does not support limit without a sort specifier.\",\n      solution: \"Try adding a sort specifier.\"\n    };\n  }\n  ;\n  return true;\n};\nOplogCheck.olderVersion = function (cursorDescription, driver) {\n  if (driver && !driver.constructor.cursorSupported) {\n    return {\n      code: \"OLDER_VERSION\",\n      reason: \"Your Meteor version does not have oplog support.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    };\n  }\n  return true;\n};\nOplogCheck.gitCheckout = function (cursorDescription, driver) {\n  if (!Meteor.release) {\n    return {\n      code: \"GIT_CHECKOUT\",\n      reason: \"Seems like your Meteor version is based on a Git checkout and it doesn't have the oplog support.\",\n      solution: \"Try to upgrade your Meteor version.\"\n    };\n  }\n  return true;\n};\nvar preRunningMatchers = [OplogCheck.env, OplogCheck.disableOplog, OplogCheck.miniMongoMatcher];\nvar globalMatchers = [OplogCheck.fields, OplogCheck.skip, OplogCheck.where, OplogCheck.geo, OplogCheck.limitButNoSort, OplogCheck.miniMongoSorter, OplogCheck.olderVersion, OplogCheck.gitCheckout];\nvar versionMatchers = [[/^0\\.7\\.1/, OplogCheck._071], [/^0\\.7\\.0/, OplogCheck._070]];\nKadira.checkWhyNoOplog = function (cursorDescription, observerDriver) {\n  if (typeof Minimongo == 'undefined') {\n    return {\n      code: \"CANNOT_DETECT\",\n      reason: \"You are running an older Meteor version and Kadira can't check oplog state.\",\n      solution: \"Try updating your Meteor app\"\n    };\n  }\n  var result = runMatchers(preRunningMatchers, cursorDescription, observerDriver);\n  if (result !== true) {\n    return result;\n  }\n  var meteorVersion = Meteor.release;\n  for (var lc = 0; lc < versionMatchers.length; lc++) {\n    var matcherInfo = versionMatchers[lc];\n    if (matcherInfo[0].test(meteorVersion)) {\n      var matched = matcherInfo[1](cursorDescription, observerDriver);\n      if (matched !== true) {\n        return matched;\n      }\n    }\n  }\n  result = runMatchers(globalMatchers, cursorDescription, observerDriver);\n  if (result !== true) {\n    return result;\n  }\n  return {\n    code: \"OPLOG_SUPPORTED\",\n    reason: \"This query should support oplog. It's weird if it's not.\",\n    solution: \"Please contact Kadira support and let's discuss.\"\n  };\n};\nfunction runMatchers(matcherList, cursorDescription, observerDriver) {\n  for (var lc = 0; lc < matcherList.length; lc++) {\n    var matcher = matcherList[lc];\n    var matched = matcher(cursorDescription, observerDriver);\n    if (matched !== true) {\n      return matched;\n    }\n  }\n  return true;\n}","map":{"version":3,"names":["OplogCheck","_070","cursorDescription","options","limit","code","reason","solution","exists$","_","any","selector","value","field","substr","onlyScalers","all","Meteor","Collection","ObjectID","_071","matcher","Minimongo","Matcher","env","process","MONGO_OPLOG_URL","disableOplog","_disableOplog","miniMongoMatcher","ex","message","miniMongoSorter","Sorter","sort","sorter","fields","LocalCollection","_checkSupportedProjection","e","name","skip","where","hasWhere","geo","hasGeoQuery","limitButNoSort","olderVersion","driver","constructor","cursorSupported","gitCheckout","release","preRunningMatchers","globalMatchers","versionMatchers","Kadira","checkWhyNoOplog","observerDriver","result","runMatchers","meteorVersion","lc","length","matcherInfo","test","matched","matcherList"],"sources":["packages/mdg:meteor-apm-agent/lib/check_for_oplog.js"],"sourcesContent":["// expose for testing purpose\nOplogCheck = {};\n\nOplogCheck._070 = function(cursorDescription) {\n  var options = cursorDescription.options;\n  if (options.limit) {\n    return {\n      code: \"070_LIMIT_NOT_SUPPORTED\",\n      reason: \"Meteor 0.7.0 does not support limit with oplog.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    }\n  };\n\n  var exists$ = _.any(cursorDescription.selector, function (value, field) {\n    if (field.substr(0, 1) === '$')\n      return true;\n  });\n\n  if(exists$) {\n    return {\n      code: \"070_$_NOT_SUPPORTED\",\n      reason: \"Meteor 0.7.0 supports only equal checks with oplog.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    }\n  };\n\n  var onlyScalers = _.all(cursorDescription.selector, function (value, field) {\n    return typeof value === \"string\" ||\n      typeof value === \"number\" ||\n      typeof value === \"boolean\" ||\n      value === null ||\n      value instanceof Meteor.Collection.ObjectID;\n  });\n\n  if(!onlyScalers) {\n    return {\n      code: \"070_ONLY_SCALERS\",\n      reason: \"Meteor 0.7.0 only supports scalers as comparators.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    }\n  }\n\n  return true;\n};\n\nOplogCheck._071 = function(cursorDescription) {\n  var options = cursorDescription.options;\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n  if (options.limit) {\n    return {\n      code: \"071_LIMIT_NOT_SUPPORTED\",\n      reason: \"Meteor 0.7.1 does not support limit with oplog.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    }\n  };\n\n  return true;\n};\n\n\nOplogCheck.env = function() {\n  if(!process.env.MONGO_OPLOG_URL) {\n    return {\n      code: \"NO_ENV\",\n      reason: \"You haven't added oplog support for your the Meteor app.\",\n      solution: \"Add oplog support for your Meteor app. see: http://goo.gl/Co1jJc\"\n    }\n  } else {\n    return true;\n  }\n};\n\nOplogCheck.disableOplog = function(cursorDescription) {\n  if(cursorDescription.options._disableOplog) {\n    return {\n      code: \"DISABLE_OPLOG\",\n      reason: \"You've disable oplog for this cursor explicitly with _disableOplog option.\"\n    };\n  } else {\n    return true;\n  }\n};\n\n// when creating Minimongo.Matcher object, if that's throws an exception\n// meteor won't do the oplog support\nOplogCheck.miniMongoMatcher = function(cursorDescription) {\n  if(Minimongo.Matcher) {\n    try {\n      var matcher = new Minimongo.Matcher(cursorDescription.selector);\n      return true;\n    } catch(ex) {\n      return {\n        code: \"MINIMONGO_MATCHER_ERROR\",\n        reason: \"There's something wrong in your mongo query: \" +  ex.message,\n        solution: \"Check your selector and change it accordingly.\"\n      };\n    }\n  } else {\n    // If there is no Minimongo.Matcher, we don't need to check this\n    return true;\n  }\n};\n\nOplogCheck.miniMongoSorter = function(cursorDescription) {\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n  if(Minimongo.Sorter && cursorDescription.options.sort) {\n    try {\n      var sorter = new Minimongo.Sorter(\n        cursorDescription.options.sort,\n        { matcher: matcher }\n      );\n      return true;\n    } catch(ex) {\n      return {\n        code: \"MINIMONGO_SORTER_ERROR\",\n        reason: \"Some of your sort specifiers are not supported: \" + ex.message,\n        solution: \"Check your sort specifiers and chage them accordingly.\"\n      }\n    }\n  } else {\n    return true;\n  }\n};\n\nOplogCheck.fields = function(cursorDescription) {\n  var options = cursorDescription.options;\n  if(options.fields) {\n    try {\n      LocalCollection._checkSupportedProjection(options.fields);\n      return true;\n    } catch (e) {\n      if (e.name === \"MinimongoError\") {\n        return {\n          code: \"NOT_SUPPORTED_FIELDS\",\n          reason: \"Some of the field filters are not supported: \" + e.message,\n          solution: \"Try removing those field filters.\"\n        };\n      } else {\n        throw e;\n      }\n    }\n  }\n  return true;\n};\n\nOplogCheck.skip = function(cursorDescription) {\n  if(cursorDescription.options.skip) {\n    return {\n      code: \"SKIP_NOT_SUPPORTED\",\n      reason: \"Skip does not support with oplog.\",\n      solution: \"Try to avoid using skip. Use range queries instead: http://goo.gl/b522Av\"\n    };\n  }\n\n  return true;\n};\n\nOplogCheck.where = function(cursorDescription) {\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n  if(matcher.hasWhere()) {\n    return {\n      code: \"WHERE_NOT_SUPPORTED\",\n      reason: \"Meteor does not support queries with $where.\",\n      solution: \"Try to remove $where from your query. Use some alternative.\"\n    }\n  };\n\n  return true;\n};\n\nOplogCheck.geo = function(cursorDescription) {\n  var matcher = new Minimongo.Matcher(cursorDescription.selector);\n\n  if(matcher.hasGeoQuery()) {\n    return {\n      code: \"GEO_NOT_SUPPORTED\",\n      reason: \"Meteor does not support queries with geo partial operators.\",\n      solution: \"Try to remove geo partial operators from your query if possible.\"\n    }\n  };\n\n  return true;\n};\n\nOplogCheck.limitButNoSort = function(cursorDescription) {\n  var options = cursorDescription.options;\n\n  if((options.limit && !options.sort)) {\n    return {\n      code: \"LIMIT_NO_SORT\",\n      reason: \"Meteor oplog implementation does not support limit without a sort specifier.\",\n      solution: \"Try adding a sort specifier.\"\n    }\n  };\n\n  return true;\n};\n\nOplogCheck.olderVersion = function(cursorDescription, driver) {\n  if(driver && !driver.constructor.cursorSupported) {\n    return {\n      code: \"OLDER_VERSION\",\n      reason: \"Your Meteor version does not have oplog support.\",\n      solution: \"Upgrade your app to Meteor version 0.7.2 or later.\"\n    };\n  }\n  return true;\n};\n\nOplogCheck.gitCheckout = function(cursorDescription, driver) {\n  if(!Meteor.release) {\n    return {\n      code: \"GIT_CHECKOUT\",\n      reason: \"Seems like your Meteor version is based on a Git checkout and it doesn't have the oplog support.\",\n      solution: \"Try to upgrade your Meteor version.\"\n    };\n  }\n  return true;\n};\n\nvar preRunningMatchers = [\n  OplogCheck.env,\n  OplogCheck.disableOplog,\n  OplogCheck.miniMongoMatcher\n];\n\nvar globalMatchers = [\n  OplogCheck.fields,\n  OplogCheck.skip,\n  OplogCheck.where,\n  OplogCheck.geo,\n  OplogCheck.limitButNoSort,\n  OplogCheck.miniMongoSorter,\n  OplogCheck.olderVersion,\n  OplogCheck.gitCheckout\n];\n\nvar versionMatchers = [\n  [/^0\\.7\\.1/, OplogCheck._071],\n  [/^0\\.7\\.0/, OplogCheck._070],\n];\n\nKadira.checkWhyNoOplog = function(cursorDescription, observerDriver) {\n  if(typeof Minimongo == 'undefined') {\n    return {\n      code: \"CANNOT_DETECT\",\n      reason: \"You are running an older Meteor version and Kadira can't check oplog state.\",\n      solution: \"Try updating your Meteor app\"\n    }\n  }\n\n  var result = runMatchers(preRunningMatchers, cursorDescription, observerDriver);\n  if(result !== true) {\n    return result;\n  }\n\n  var meteorVersion = Meteor.release;\n  for(var lc=0; lc<versionMatchers.length; lc++) {\n    var matcherInfo = versionMatchers[lc];\n    if(matcherInfo[0].test(meteorVersion)) {\n      var matched = matcherInfo[1](cursorDescription, observerDriver);\n      if(matched !== true) {\n        return matched;\n      }\n    }\n  }\n\n  result = runMatchers(globalMatchers, cursorDescription, observerDriver);\n  if(result !== true) {\n    return result;\n  }\n\n  return {\n    code: \"OPLOG_SUPPORTED\",\n    reason: \"This query should support oplog. It's weird if it's not.\",\n    solution: \"Please contact Kadira support and let's discuss.\"\n  };\n};\n\nfunction runMatchers(matcherList, cursorDescription, observerDriver) {\n  for(var lc=0; lc<matcherList.length; lc++) {\n    var matcher = matcherList[lc];\n    var matched = matcher(cursorDescription, observerDriver);\n    if(matched !== true) {\n      return matched;\n    }\n  }\n  return true;\n}\n"],"mappings":"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"},"sourceType":"module","externalDependencies":{},"hash":"fac812a963d64e0e3862e085c2637bb116cb8545"}
